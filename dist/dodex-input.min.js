var parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VsFy":[function(require,module,exports) {
"use strict";var e,t,n,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(e){var o=e.transaction("cards","readonly").objectStore("cards").getAll();o.onsuccess=function(){for(var c=o.result.sort(function(e,t){return Number(e.idx.replace("card",""))>Number(t.idx.replace("card",""))?1:-1}),a=0;a<c.length;a++){var d=Number(c[a].idx.replace("card",""));!function(e,n){var o={cards:{}};o.cards=e,"append"===e.type&&n<r.length||n<=27||n<r.length?("replace"===e.type&&(document.querySelector(".front"+n).innerHTML="",document.querySelector(".back"+n).innerHTML=""),f(o,e.idx,n,r)):t.addCard(o)}(c[a],d)}n.linkClickHandler(),e.close()}};function c(c,a,d){function i(e,t){var n,r=document.querySelectorAll("[name=type]"),c=(void 0!==t?t:e.target.files)[0],a=c.type.match("javascript$"),d=c.type.match("json$"),i=new FileReader;for(var l in r)if(r[l].checked){n=r[l].value;break}d||a?(i.onload=function(e){var t,r=e.target.result;if(a&&r.match("^[ |\t|\n]*return.*{")?t=new Function('"use strict"; '+r)():d&&(t=JSON.parse(r)),void 0===t)throw"Content is not a valid Object";"edit"===n?(t=v(t),document.querySelector("#savefile").setAttribute("style","opacity:1; margin-left: 5px;"),document.querySelector("#jsoneditor").style["z-index"]=1008):u(n,t).then(o)},i.readAsText(c,"UTF8")):console.warn("Content File must be js or json")}if(t=c,r=d,n=a,void 0===e&&(e=p(n),document.querySelector("#files").addEventListener("change",i,!1)),!(window.File&&window.FileReader&&window.FileList))throw"The File APIs are not fully supported in this browser.";e.click(),void 0!==window.__karma__&&(window.handleFileSelect=i)}function a(e){console.error(e)}var d,i,l=0;function u(e,t){return new Promise(function(n,r){var o,c,a,u,p=indexedDB.open("dodex",2),f=!1;p.onupgradeneeded=function(){o=p.result,f=!0,a=o.createObjectStore("cards",{keyPath:"idx",autoIncrement:!1})},p.onsuccess=function(r){o=r.target.result;for(var p=52;p>0;p--)if(t.cards["card"+p]){u=p;break}if("replace"===e||f){c=o.transaction("cards","readwrite"),a=c.objectStore("cards");var v=function(r){var c={};if(t.cards[r].front){var s=t.cards[r].front.content,p=m(s);t.cards[r].front.content=""===p?s:p}if(t.cards[r].back){var f=t.cards[r].back.content,v=m(f);t.cards[r].back.content=""===v?f:v}c[r]=t.cards[r],c.idx=r,c.type=e,a.put(c).onsuccess=function(e){0===l&&(d=e.target.result,l=1),i=e.target.result,document.querySelector("#results").innerHTML="Processed Cards: ".concat(d," ~ ").concat(i),"card"+u==r&&n(o)}};for(var y in t.cards)v(y)}else if("append"===e)for(var w in t.cards)b(w,i,n);function b(e,n,r){return s(e).then(function(i){if(c=o.transaction("cards","readwrite"),a=c.objectStore("cards"),t.cards[e].front){var s=t.cards[e].front.content,p=m(s);i[e].front.content+=""===p?s:p}if(t.cards[e].back){var f=t.cards[e].back.content,v=m(f);i[e].back.content+=""===v?f:v}t.cards[e].tab&&(i[e].tab=t.cards[e].tab),a.put(i).onsuccess=function(t){0===l&&(d=t.target.result,l=1),n=t.target.result,document.querySelector("#results").innerHTML="Processed Cards: ".concat(d," ~ ").concat(n),"card"+u==e&&r(o)}})}},p.onerror=function(e){console.error("Error",e.target)}})}function s(e){return new Promise(function(t,n){var r,o,c=indexedDB.open("dodex",2);c.onsuccess=function(a){r=c.result,o=r.transaction(["cards"],"readonly");var d=o.objectStore("cards").get(e);d.onsuccess=function(){var r=d.result;void 0!==r?t(r):n("Record ".concat(e," not found"))}},c.onerror=function(e){n(e)}})}function p(e){var t=document.querySelector("body"),n=document.createElement("div"),r=document.createElement("div");w(n,"id","dodexInput"),w(r,"id","results"),w(n,"class","content-input"),t.insertBefore(n,document.querySelector(".top--dodex"));var o=n;n=document.createElement("div");var c=document.createElement("a");w(c,"title","Close"),w(c,"class","close"),c.innerHTML="X",c.onclick=function(){var e=document.body,t=document.documentElement;e.scrollTop=0,t.scrollTop=0,b(document.querySelector("#files")),document.querySelector("#dodexInput").style.opacity=0,window.jsonEditor&&(window.jsonEditor.destroy(),window.jsonEditor=null,document.querySelector("#jsoneditor").style["z-index"]=-1),document.querySelector("#savefile")&&(document.querySelector("#savefile").style.opacity=0)};var a=document.createElement("h5");a.innerHTML="Dodex Private Content Input",w(n,"class","input"),n.appendChild(c),n.appendChild(a);var d=document.createElement("p"),i=document.createElement("p"),l=document.createElement("br");c=document.createElement("a"),n.appendChild(c);var u=document.createElement("label");w(u,"for","files"),n.appendChild(u),u.innerHTML="Click to Select or Drag & Drop a file on Button",n.appendChild(d);var s=document.createElement("input");if(w(s,"id","files"),w(s,"type","file"),w(s,"name","files[]"),w(s,"size","1"),n.appendChild(s),n.appendChild(i),"full"===e.private||"partial"===e.private){var p=document.createElement("div");if(!0===e.replace){var f=document.createElement("label"),m=document.createTextNode("Replace"),v=document.createElement("input");v.type="radio",v.name="type",v.value="replace",v.checked=!0,f.appendChild(v),f.appendChild(m),p.appendChild(f)}var y=document.createElement("label"),E=document.createTextNode("Append"),C=document.createElement("input");if(C.type="radio",C.name="type",C.value="append",w(C,"style","margin-left: 5px;"),!1===e.replace&&(C.checked=!0),y.appendChild(C),y.appendChild(E),p.appendChild(y),window.JSONEditor){var x=document.createElement("label"),S=document.createTextNode("Edit"),k=document.createElement("input");k.type="radio",k.name="type",k.value="edit",w(k,"style","margin-left: 5px;"),x.appendChild(k),x.appendChild(S),p.appendChild(x);var g=document.createElement("label"),j=document.createElement("input");j.type="button",j.name="button1",j.value="Save",j.id="savefile",w(j,"style","opacity:0;"),j.addEventListener("click",function(e){var t=document.createElement("a");t.href="data:application/octet-stream,"+encodeURIComponent(window.jsonEditor.getText()),t.download=document.querySelector("#files").value,t.click(),window.jsonEditor.refresh()},!1),g.appendChild(j),p.appendChild(g)}var q=document.createElement("label"),T=document.createElement("input");w(T,"style","margin-left: 5px;"),T.type="button",T.name="button2",T.value="Remove Private Data",T.id="removedb",T.addEventListener("click",function(e){h("dodex")},!1),q.appendChild(T),p.appendChild(q),n.appendChild(p)}return n.appendChild(l),n.appendChild(r),d=document.createElement("p"),n.appendChild(d),o.appendChild(n),c}function f(e,t,n,r){var o=r[n-1].querySelector(".front"+n),c=r[n-1].querySelector(".back"+n);e.cards&&e.cards[t]&&(e.cards[t].front&&e.cards[t].front.content&&e.cards[t].front.content.length>0&&(o.insertAdjacentHTML("beforeend",e.cards[t].front.content),o.classList.add("green-tab")),e.cards[t].back&&e.cards[t].back.content&&e.cards[t].back.content.length>0&&c.insertAdjacentHTML("beforeend",e.cards[t].back.content))}function m(e){var t="";if(e.constructor===Array)for(var n in e)t+=e[n]+" ";return t}function v(e){var t=document.getElementById("jsoneditor"),n={};t&&(t.style["z-index"]=-1,n={name:"dodex",mode:"code",modes:["code","form","text","view","preview","tree"],onError:function(e){alert(e.toString())},onModeChange:function(e){var t=document.querySelector("table.jsoneditor-tree");if(t)t.style.backgroundColor="#fcfee6";else if("preview"===e){document.querySelector("pre.jsoneditor-preview").style.backgroundColor="#fcfee6"}}});var r=null;window.JSONEditor&&(window.jsonEditor||(r=new window.JSONEditor(t,n),window.jsonEditor=r),window.jsonEditor.set(e),window.jsonEditor.refresh())}window.doDexInput=c;var y=c;function w(e,t,n){var r=document.createAttribute(t);r.value=n,e.setAttributeNode(r)}function b(e){try{e.value=null}catch(t){}e.value&&e.parentNode.replaceChild(e.cloneNode(!0),e)}function h(e){if(confirm("Are you sure?")){var t=indexedDB.deleteDatabase(e);t.onsuccess=function(){if(r)for(var e in r){var t=Number(e)+1;try{r[e].querySelector(".front"+t).innerHTML="",r[e].querySelector(".back"+t).innerHTML="",window.dodexContent&&window.dodexContent.cards&&f(window.dodexContent,"card"+t,t,r)}catch(n){console.error(n)}}console.warn("Removal accomplished")},t.onerror=function(e){console.error("Removal failed-",e)},t.onblocked=function(e){console.error("Removal blocked-",e)}}}exports.default=y;
},{}]},{},["VsFy"], null)